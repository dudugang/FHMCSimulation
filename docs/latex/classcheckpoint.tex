\hypertarget{classcheckpoint}{\section{checkpoint Class Reference}
\label{classcheckpoint}\index{checkpoint@{checkpoint}}
}


Information to restart/checkpoint the simulation.  




{\ttfamily \#include $<$checkpoint.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classcheckpoint_a0c9fbc3decbdd8a0eedd43e4bef55583}{checkpoint} ()
\item 
\hyperlink{classcheckpoint_ac04bc1b2caf79f6071842919d5743024}{checkpoint} (const std\-::string directory, const long int frequency, \hyperlink{classsim_system}{sim\-System} \&sys, const bool snaps=false, const bool override=false)
\begin{DoxyCompactList}\small\item\em Read system state from a file. \end{DoxyCompactList}\item 
\hyperlink{classcheckpoint_a953aa90982db63755a071332c296ea68}{$\sim$checkpoint} ()
\item 
void \hyperlink{classcheckpoint_afe0ae7b3a2b83b5e321f09e9cb70a374}{load} (\hyperlink{classsim_system}{sim\-System} \&sys, const bool override)
\begin{DoxyCompactList}\small\item\em Read state of a system from a json file. \end{DoxyCompactList}\item 
void \hyperlink{classcheckpoint_a797b53961f8cf53bc78762144a514357}{dump} (\hyperlink{classsim_system}{sim\-System} \&sys, const long long int \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{move\-Counter}=0, const long long int \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweep\-Counter}=0, const bool refine=true)
\begin{DoxyCompactList}\small\item\em Save the state of a system to a json file. \end{DoxyCompactList}\item 
bool \hyperlink{classcheckpoint_ab2f76253fde665ee149c1380e78f5c2f}{check} (\hyperlink{classsim_system}{sim\-System} \&sys, const long long int \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{move\-Counter}=0, const long long int \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweep\-Counter}=0, const bool refine=true)
\begin{DoxyCompactList}\small\item\em Check how long it has been since last checkpoint, and write new one if has exceeded frequency. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{has\-Checkpoint}
\begin{DoxyCompactList}\small\item\em At least one checkpoint has been made that the system can restart from. \end{DoxyCompactList}\item 
bool \hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{take\-Snaps}
\begin{DoxyCompactList}\small\item\em Save snapshot of the system each time a record is made. \end{DoxyCompactList}\item 
bool \hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmc\-Done}
\item 
bool \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossover\-Done}
\item 
bool \hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{wala\-Done}
\begin{DoxyCompactList}\small\item\em Progress of each stage, regardless of where the checkpoint indicated to start from. \end{DoxyCompactList}\item 
bool \hyperlink{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}{res\-From\-W\-A\-L\-A}
\item 
bool \hyperlink{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}{res\-From\-Cross}
\item 
bool \hyperlink{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}{res\-From\-T\-M\-M\-C}
\begin{DoxyCompactList}\small\item\em Flags corresponding to which stage the checkpoint indicated to restart from. \end{DoxyCompactList}\item 
long int \hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq}
\begin{DoxyCompactList}\small\item\em Frequency (in seconds) that the system should print a new instantaneous snapshot of itself, does not load from checkpoints but is assigned when instantiated (is dumped though) \end{DoxyCompactList}\item 
long long int \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{move\-Counter}
\begin{DoxyCompactList}\small\item\em Tracks the number of moves in a given sweep that have executed. \end{DoxyCompactList}\item 
long long int \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweep\-Counter}
\begin{DoxyCompactList}\small\item\em Tracks the number of sweeps that have executed. \end{DoxyCompactList}\item 
double \hyperlink{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{wala\-\_\-ln\-F}
\begin{DoxyCompactList}\small\item\em Current value of ln\-F from W\-A\-L\-A. \end{DoxyCompactList}\item 
std\-::string \hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}
\begin{DoxyCompactList}\small\item\em Name of the checkpoint directory containing the information to reinitialize the system (json) \end{DoxyCompactList}\item 
std\-::string \hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkpt\-Name}
\begin{DoxyCompactList}\small\item\em Name of checkpoint file. \end{DoxyCompactList}\item 
std\-::vector$<$ double $>$ \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb}
\item 
std\-::vector$<$ double $>$ \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}
\begin{DoxyCompactList}\small\item\em Upper and lower energy bounds for energy histogram. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Information to restart/checkpoint the simulation. 

Definition at line 22 of file checkpoint.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classcheckpoint_a0c9fbc3decbdd8a0eedd43e4bef55583}{\index{checkpoint@{checkpoint}!checkpoint@{checkpoint}}
\index{checkpoint@{checkpoint}!checkpoint@{checkpoint}}
\subsubsection[{checkpoint}]{\setlength{\rightskip}{0pt plus 5cm}checkpoint\-::checkpoint (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classcheckpoint_a0c9fbc3decbdd8a0eedd43e4bef55583}


Definition at line 24 of file checkpoint.\-h.



References crossover\-Done, dir, freq, has\-Checkpoint, res\-From\-Cross, res\-From\-T\-M\-M\-C, res\-From\-W\-A\-L\-A, take\-Snaps, tmmc\-Done, and wala\-Done.


\begin{DoxyCode}
24 \{ \hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} = \textcolor{keyword}{false}; 
      \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}{resFromTMMC} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}{resFromWALA} = \textcolor{keyword}{false}; 
      \hyperlink{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}{resFromCross} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{takeSnaps} = \textcolor{keyword}{false}; \hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq} = -1; \hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir} = \textcolor{stringliteral}{"checkpt"}; \}
\end{DoxyCode}
\hypertarget{classcheckpoint_ac04bc1b2caf79f6071842919d5743024}{\index{checkpoint@{checkpoint}!checkpoint@{checkpoint}}
\index{checkpoint@{checkpoint}!checkpoint@{checkpoint}}
\subsubsection[{checkpoint}]{\setlength{\rightskip}{0pt plus 5cm}checkpoint\-::checkpoint (
\begin{DoxyParamCaption}
\item[{const std\-::string}]{directory, }
\item[{const long int}]{frequency, }
\item[{{\bf sim\-System} \&}]{sys, }
\item[{const bool}]{snaps = {\ttfamily false}, }
\item[{const bool}]{override = {\ttfamily false}}
\end{DoxyParamCaption}
)}}\label{classcheckpoint_ac04bc1b2caf79f6071842919d5743024}


Read system state from a file. 

If checkpoint directory is found and json file is valid, data is loaded from it. Note that although this stores the frequency, it does not use the value it dumps to file. This class always uses the frequency given when the class is instantiated.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em dir} & Directory where system state was saved \\
\hline
\mbox{\tt in}  & {\em frequency} & Frquency to take snapshots/checkpoints of the system ($<$ 0 disables) \\
\hline
\mbox{\tt in}  & {\em sys} & System to checkpoint \\
\hline
\mbox{\tt in}  & {\em snaps} & Take snapshots each time a record is made to make a movie? (default = false) \\
\hline
\mbox{\tt in}  & {\em override} & Manually override exceptions, use with extreme caution (default=false) \\
\hline
\end{DoxyParams}


Definition at line 14 of file checkpoint.\-cpp.



References chkpt\-Name, crossover\-Done, dir, file\-Exists(), freq, has\-Checkpoint, load(), move\-Counter, res\-From\-Cross, res\-From\-T\-M\-M\-C, res\-From\-W\-A\-L\-A, sim\-System\-::restart\-From\-T\-M\-M\-C, sweep\-Counter, take\-Snaps, tmmc\-Done, and wala\-Done.


\begin{DoxyCode}
14                                                                                                            
                             \{
15     \hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone} = \textcolor{keyword}{false};
16     \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} = \textcolor{keyword}{false};
17     \hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} = \textcolor{keyword}{false};
18     \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = \textcolor{keyword}{false};
19     \hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{takeSnaps} = snaps;
20     \hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir} = directory;
21     \hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq} = frequency;
22     \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{moveCounter} = 0;
23     \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweepCounter} = 0;
24     \hyperlink{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}{resFromWALA} = \textcolor{keyword}{false};
25     \hyperlink{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}{resFromCross} = \textcolor{keyword}{false};
26     \hyperlink{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}{resFromTMMC} = \textcolor{keyword}{false};
27 
28     \hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName} = \hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/state.json"};
29     \textcolor{keywordflow}{if} (\hyperlink{utilities_8cpp_a9d1e3672fd331d4185c1763c80226307}{fileExists}(\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName})) \{
30         \textcolor{keywordflow}{try} \{
31             \hyperlink{classcheckpoint_afe0ae7b3a2b83b5e321f09e9cb70a374}{load}(sys, \textcolor{keyword}{override});
32         \} \textcolor{keywordflow}{catch} (std::exception &ex) \{
33             std::string a = \textcolor{stringliteral}{"Unable to load checkpoint "}+\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName}+\textcolor{stringliteral}{" : "};
34             std::string b = ex.what();
35             \textcolor{keywordflow}{throw} \hyperlink{classcustom_exception}{customException} (a+b);
36         \}
37     \} \textcolor{keywordflow}{else} \{
38         \textcolor{comment}{// Forcible skip to TMMC stage if want to manually start TMMC}
39         \textcolor{keywordflow}{if} (sys.\hyperlink{classsim_system_a0c81d3b606c070c801f8d86288e44391}{restartFromTMMC})\{
40             \hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} = \textcolor{keyword}{true};
41             \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} = \textcolor{keyword}{true};
42         \}
43     \}
44 
45     time(&lastCheckPt\_); \textcolor{comment}{// Take time when object was instantiated as initial time so that check() has a
       point of reference}
46 \}
\end{DoxyCode}
\hypertarget{classcheckpoint_a953aa90982db63755a071332c296ea68}{\index{checkpoint@{checkpoint}!$\sim$checkpoint@{$\sim$checkpoint}}
\index{$\sim$checkpoint@{$\sim$checkpoint}!checkpoint@{checkpoint}}
\subsubsection[{$\sim$checkpoint}]{\setlength{\rightskip}{0pt plus 5cm}checkpoint\-::$\sim$checkpoint (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classcheckpoint_a953aa90982db63755a071332c296ea68}


Definition at line 26 of file checkpoint.\-h.


\begin{DoxyCode}
26 \{\};
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classcheckpoint_ab2f76253fde665ee149c1380e78f5c2f}{\index{checkpoint@{checkpoint}!check@{check}}
\index{check@{check}!checkpoint@{checkpoint}}
\subsubsection[{check}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::check (
\begin{DoxyParamCaption}
\item[{{\bf sim\-System} \&}]{sys, }
\item[{const long long int}]{move\-Counter = {\ttfamily 0}, }
\item[{const long long int}]{sweep\-Counter = {\ttfamily 0}, }
\item[{const bool}]{refine = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{classcheckpoint_ab2f76253fde665ee149c1380e78f5c2f}


Check how long it has been since last checkpoint, and write new one if has exceeded frequency. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em sys} & System to checkpoint \\
\hline
\mbox{\tt in}  & {\em move\-Counter} & Number of moves out of a given sweep that have executed \\
\hline
\mbox{\tt in}  & {\em sweep\-Counter} & Number of loops/sweeps that have executed \\
\hline
\mbox{\tt in}  & {\em refine} & Refine the histogram boundaries before printing any? (default=true)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool Is a checkpoint being generated or not 
\end{DoxyReturn}


Definition at line 285 of file checkpoint.\-cpp.



References dump(), and freq.



Referenced by perform\-Crossover(), perform\-T\-M\-M\-C(), and perform\-W\-A\-L\-A().


\begin{DoxyCode}
285                                                                                                            
                       \{
286     \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq} > 0) \{
287         \textcolor{keywordflow}{if} (std::abs(difftime(time(&now\_), lastCheckPt\_)) >= \hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq}) \{
288             \hyperlink{classcheckpoint_a797b53961f8cf53bc78762144a514357}{dump}(sys, \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{moveCounter}, \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweepCounter}, refine);
289             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
290         \}
291     \}
292     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
293 \}
\end{DoxyCode}
\hypertarget{classcheckpoint_a797b53961f8cf53bc78762144a514357}{\index{checkpoint@{checkpoint}!dump@{dump}}
\index{dump@{dump}!checkpoint@{checkpoint}}
\subsubsection[{dump}]{\setlength{\rightskip}{0pt plus 5cm}void checkpoint\-::dump (
\begin{DoxyParamCaption}
\item[{{\bf sim\-System} \&}]{sys, }
\item[{const long long int}]{move\-Counter = {\ttfamily 0}, }
\item[{const long long int}]{sweep\-Counter = {\ttfamily 0}, }
\item[{const bool}]{refine = {\ttfamily true}}
\end{DoxyParamCaption}
)}}\label{classcheckpoint_a797b53961f8cf53bc78762144a514357}


Save the state of a system to a json file. 

Creates the checkpoint directory if it doesn't exist.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em sys} & System to checkpoint \\
\hline
\mbox{\tt in}  & {\em move\-Counter} & Number of moves out of a given sweep that have executed \\
\hline
\mbox{\tt in}  & {\em sweep\-Counter} & Number of loops/sweeps that have executed \\
\hline
\mbox{\tt in}  & {\em refine} & Refine the histogram boundaries before printing any? (default=true) \\
\hline
\end{DoxyParams}


Definition at line 159 of file checkpoint.\-cpp.



References chkpt\-Name, crossover\-Done, dir, elb, eub, sim\-System\-::ext\-Mom\-Counter(), file\-Exists(), freq, sim\-System\-::get\-E\-L\-B(), sim\-System\-::get\-E\-U\-B(), get\-Time\-Stamp(), sim\-System\-::get\-T\-M\-M\-C\-Bias(), sim\-System\-::get\-W\-A\-L\-A\-Bias(), has\-Checkpoint, wala\-::ln\-F(), tmmc\-::print(), wala\-::print(), sim\-System\-::print\-Energy\-Histogram(), sim\-System\-::print\-Ext\-Moments(), sim\-System\-::print\-Pk\-Histogram(), sim\-System\-::print\-Snapshot(), sim\-System\-::refine\-Energy\-Histogram\-Bounds(), sim\-System\-::refine\-Pk\-Histogram\-Bounds(), take\-Snaps, tmmc\-Done, and wala\-Done.



Referenced by check().


\begin{DoxyCode}
159                                                                                                            
                      \{
160     \textcolor{keywordflow}{if} (!\hyperlink{utilities_8cpp_a9d1e3672fd331d4185c1763c80226307}{fileExists}(\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName})) \{
161         std::string command = \textcolor{stringliteral}{"mkdir -p "}+\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{" && touch "}+\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName};
162         \textcolor{keyword}{const} \textcolor{keywordtype}{int} succ = system(command.c\_str());
163         \textcolor{keywordflow}{if} (succ != 0) \{
164             \textcolor{keywordflow}{throw} \hyperlink{classcustom_exception}{customException}(\textcolor{stringliteral}{"Unable to initialize checkpoint"});
165         \}
166     \}
167 
168     rapidjson::StringBuffer s;
169     rapidjson::PrettyWriter < rapidjson::StringBuffer > writer(s);
170     \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = \textcolor{keyword}{true};
171 
172     \textcolor{comment}{// Write restart/checkpoint options}
173     writer.StartObject();
174     writer.String(\textcolor{stringliteral}{"tmmcDone"});
175     writer.Bool(\hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone});
176 
177     writer.String(\textcolor{stringliteral}{"crossoverDone"});
178     writer.Bool(\hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone});
179 
180     writer.String(\textcolor{stringliteral}{"walaDone"});
181     writer.Bool(\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone});
182 
183     writer.String(\textcolor{stringliteral}{"hasCheckpoint"});
184     writer.Bool(\hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint});
185 
186     writer.String(\textcolor{stringliteral}{"takeSnaps"});
187     writer.Bool(\hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{takeSnaps});
188 
189     writer.String(\textcolor{stringliteral}{"freq"});
190     writer.Int64(\hyperlink{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{freq});
191 
192     writer.String(\textcolor{stringliteral}{"dir"});
193     writer.String(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}.c\_str());
194 
195     writer.String(\textcolor{stringliteral}{"moveCounter"});
196     writer.Double(\hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{moveCounter});
197 
198     writer.String(\textcolor{stringliteral}{"sweepCounter"});
199     writer.Double(\hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweepCounter});
200 
201     \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone}) \{ \textcolor{comment}{// In final TMMC stage or just finished the TMMC
       (end of simulation)}
202         sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_ad49e147dc88b3e1c2975269598f94327}{print}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc"}, \textcolor{keyword}{true}, \textcolor{keyword}{true});
203         \textcolor{keywordflow}{if} (refine) \{
204             sys.\hyperlink{classsim_system_afe05cba714a032b445cfb1a529547833}{refineEnergyHistogramBounds}();
205         \}
206         sys.\hyperlink{classsim_system_a6ef1ba3e08ec44d865436e272cdebc9b}{printEnergyHistogram}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/eHist"}, \textcolor{keyword}{false}); \textcolor{comment}{// Un-normalized Energy
       histogram}
207         \textcolor{keywordflow}{if} (refine) \{
208             sys.\hyperlink{classsim_system_a1e462fcb63389d59419ff6135b2d802e}{refinePkHistogramBounds}();
209         \}
210         sys.\hyperlink{classsim_system_ac29bdd6f7fa6f9526b7eafcf658d70d8}{printPkHistogram}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/pkHist"}, \textcolor{keyword}{false}); \textcolor{comment}{// Un-normalized Particle histogram}
211         sys.\hyperlink{classsim_system_a2818b2f0ff79782d5443ca0f191564f8}{printExtMoments}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/extMom"}, \textcolor{keyword}{false}); \textcolor{comment}{// Un-normalized Extensive moments,
       plus counter (number of times each recorded)}
212         writer.String(\textcolor{stringliteral}{"extMomCounter"});
213         std::vector < double > ctr = sys.\hyperlink{classsim_system_a1744c4c22603662081d75985bc30b754}{extMomCounter}();
214         writer.StartArray();
215         \textcolor{keywordflow}{for} (std::vector < double >::iterator it = ctr.begin(); it < ctr.end(); ++it) \{
216             writer.Double(*it);
217         \}
218         writer.EndArray();
219     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && !\hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} && !\hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone}) \{ \textcolor{comment}{// In crossover
       stage}
220         sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_ad49e147dc88b3e1c2975269598f94327}{print}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc"}, \textcolor{keyword}{true}, \textcolor{keyword}{true});
221         sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_a65569289fac85d0da9c336e17c9d809a}{print}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala"}, \textcolor{keyword}{true});
222 
223         writer.String(\textcolor{stringliteral}{"wala\_lnF"});
224         writer.Double(sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_acb8e59580d97bc3c5b9b4ff45eb6bb9a}{lnF}());
225 
226         \textcolor{comment}{// Energy upper and lower bounds for histogram}
227         std::vector < double > \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb} = sys.\hyperlink{classsim_system_a610cbb1c6059151e420dbd42dd9da714}{getELB}(), \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub} = sys.\hyperlink{classsim_system_ae87e0ac03cc11259cd3b44c780a90a06}{getEUB}();
228         writer.String(\textcolor{stringliteral}{"energyHistogramLB"});
229         writer.StartArray();
230         \textcolor{keywordflow}{for} (std::vector < double >::iterator it = elb.begin(); it < elb.end(); ++it) \{
231             writer.Double(*it);
232         \}
233         writer.EndArray();
234         writer.String(\textcolor{stringliteral}{"energyHistogramUB"});
235         writer.StartArray();
236         \textcolor{keywordflow}{for} (std::vector < double >::iterator it = \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.begin(); it < \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.end(); ++it) \{
237             writer.Double(*it);
238         \}
239         writer.EndArray();
240     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && !\hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} && !\hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone}) \{ \textcolor{comment}{// In WALA stage}
241         sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_a65569289fac85d0da9c336e17c9d809a}{print}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala"}, \textcolor{keyword}{true});
242 
243         writer.String(\textcolor{stringliteral}{"wala\_lnF"});
244         writer.Double(sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_acb8e59580d97bc3c5b9b4ff45eb6bb9a}{lnF}());
245 
246         \textcolor{comment}{// Energy upper and lower bounds for histogram}
247         std::vector < double > elb = sys.\hyperlink{classsim_system_a610cbb1c6059151e420dbd42dd9da714}{getELB}(), \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub} = sys.\hyperlink{classsim_system_ae87e0ac03cc11259cd3b44c780a90a06}{getEUB}();
248         writer.String(\textcolor{stringliteral}{"energyHistogramLB"});
249         writer.StartArray();
250         \textcolor{keywordflow}{for} (std::vector < double >::iterator it = elb.begin(); it < elb.end(); ++it) \{
251             writer.Double(*it);
252         \}
253         writer.EndArray();
254         writer.String(\textcolor{stringliteral}{"energyHistogramUB"});
255         writer.StartArray();
256         \textcolor{keywordflow}{for} (std::vector < double >::iterator it = \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.begin(); it < \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.end(); ++it) \{
257             writer.Double(*it);
258         \}
259         writer.EndArray();
260     \} \textcolor{keywordflow}{else} \{
261         \textcolor{keywordflow}{throw} \hyperlink{classcustom_exception}{customException} (\textcolor{stringliteral}{"Uncertain which stage simulation is in, so cannot checkpoint
      "});
262     \}
263     writer.EndObject();
264     std::ofstream outData(chkptName.c\_str());
265     outData << s.GetString() << std::endl;
266 
267     sys.\hyperlink{classsim_system_ae3096dc65acdf38cc824e507cca33370}{printSnapshot}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/snap.xyz"}, \hyperlink{utilities_8cpp_aa6d910bf51f18a75deb20c6f0fbba285}{getTimeStamp}(), \textcolor{keyword}{true}); \textcolor{comment}{// Instantaneous
       snapshot}
268     \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{takeSnaps}) \{ \textcolor{comment}{// This only prints M = 0 atoms (fully inserted) to create a movie}
269         sys.\hyperlink{classsim_system_ae3096dc65acdf38cc824e507cca33370}{printSnapshot}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/movie.xyz"}, \hyperlink{utilities_8cpp_aa6d910bf51f18a75deb20c6f0fbba285}{getTimeStamp}(), \textcolor{keyword}{false});
270     \}
271 
272     time(&lastCheckPt\_);
273 \}
\end{DoxyCode}
\hypertarget{classcheckpoint_afe0ae7b3a2b83b5e321f09e9cb70a374}{\index{checkpoint@{checkpoint}!load@{load}}
\index{load@{load}!checkpoint@{checkpoint}}
\subsubsection[{load}]{\setlength{\rightskip}{0pt plus 5cm}void checkpoint\-::load (
\begin{DoxyParamCaption}
\item[{{\bf sim\-System} \&}]{sys, }
\item[{const bool}]{override}
\end{DoxyParamCaption}
)}}\label{classcheckpoint_afe0ae7b3a2b83b5e321f09e9cb70a374}


Read state of a system from a json file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em sys} & System to checkpoint \\
\hline
\mbox{\tt in}  & {\em override} & Manually override exceptions, use with extreme caution (default=false) \\
\hline
\end{DoxyParams}


Definition at line 54 of file checkpoint.\-cpp.



References tmmc\-::calculate\-P\-I(), chkpt\-Name, crossover\-Done, dir, elb, eub, file\-Exists(), sim\-System\-::get\-T\-M\-M\-C\-Bias(), sim\-System\-::get\-Total\-M(), sim\-System\-::get\-W\-A\-L\-A\-Bias(), has\-Checkpoint, move\-Counter, parse\-Json(), tmmc\-::read\-C(), sim\-System\-::read\-Config(), wala\-::read\-H(), tmmc\-::read\-H\-C(), wala\-::readln\-P\-I(), res\-From\-Cross, res\-From\-T\-M\-M\-C, res\-From\-W\-A\-L\-A, sim\-System\-::restart\-Energy\-Histogram(), sim\-System\-::restart\-Ext\-Moments(), sim\-System\-::restart\-Pk\-Histogram(), send\-Err(), send\-Msg(), sim\-System\-::set\-E\-L\-B(), sim\-System\-::set\-E\-U\-B(), sim\-System\-::start\-T\-M\-M\-C(), sim\-System\-::start\-W\-A\-L\-A(), sweep\-Counter, S\-Y\-S\-\_\-\-F\-A\-I\-L\-U\-R\-E, take\-Snaps, tmmc\-Done, sim\-System\-::tmmc\-Sweep\-Size, sim\-System\-::wala\-\_\-g, wala\-\_\-ln\-F, sim\-System\-::wala\-\_\-s, and wala\-Done.



Referenced by checkpoint().


\begin{DoxyCode}
54                                                           \{
55     \textcolor{keywordflow}{if} (!\hyperlink{utilities_8cpp_a9d1e3672fd331d4185c1763c80226307}{fileExists}(\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName}) && !\textcolor{keyword}{override}) \{
56         \textcolor{keywordflow}{throw} \hyperlink{classcustom_exception}{customException} (\textcolor{stringliteral}{"No checkpoint by the name: "}+
      \hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName});
57     \}
58 
59     rapidjson::Document doc;
60     \textcolor{keywordflow}{try} \{
61         \hyperlink{utilities_8cpp_a3f494918ff3c252de4914c9905be04e7}{parseJson} (\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName}, doc);
62 
63         \hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone} = doc[\textcolor{stringliteral}{"tmmcDone"}].GetBool();
64         \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} = doc[\textcolor{stringliteral}{"crossoverDone"}].GetBool();
65         \hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} = doc[\textcolor{stringliteral}{"walaDone"}].GetBool();
66         \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = doc[\textcolor{stringliteral}{"hasCheckpoint"}].GetBool();
67         \hyperlink{classcheckpoint_a685226e8bae8084937f73f65c326c362}{takeSnaps} = doc[\textcolor{stringliteral}{"takeSnaps"}].GetBool();
68         \hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir} = doc[\textcolor{stringliteral}{"dir"}].GetString();
69         \hyperlink{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{moveCounter} = (\textcolor{keywordtype}{long} \textcolor{keywordtype}{long} int)doc[\textcolor{stringliteral}{"moveCounter"}].GetDouble();
70         \hyperlink{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{sweepCounter} = (\textcolor{keywordtype}{long} \textcolor{keywordtype}{long} int)doc[\textcolor{stringliteral}{"sweepCounter"}].GetDouble();
71 
72         \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && \hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone}) \{ \textcolor{comment}{// In final TMMC stage or just finished the
       TMMC (end of simulation)}
73             \hyperlink{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}{resFromTMMC} = \textcolor{keyword}{true};
74             sys.\hyperlink{classsim_system_ac689245cd8e9ddfdcd94d3871a5a5d6b}{startTMMC}(sys.\hyperlink{classsim_system_a56e284a361964d0a9ce5c45f41d56ab1}{tmmcSweepSize}, sys.\hyperlink{classsim_system_aa4ad1afff101bb530e1590df05035276}{getTotalM}());
75             sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_a7d9ee0505dc801cbff55bc35c3654a61}{readC}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc\_C.dat"});
76             sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_ab51a593d041a65c4ca47e6c4e0c26992}{readHC}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc\_HC.dat"});
77             sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_a8e065523e9cc3c9628f91d3804cd201e}{calculatePI}();
78             std::vector < double > ctr (doc[\textcolor{stringliteral}{"extMomCounter"}].Size(), 0);
79             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < doc[\textcolor{stringliteral}{"extMomCounter"}].Size(); ++i) \{
80                 ctr[i] = doc[\textcolor{stringliteral}{"extMomCounter"}][i].GetDouble();
81             \}
82             sys.\hyperlink{classsim_system_ae073008ed44e551f0d008b2f5a0fc06f}{restartEnergyHistogram}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/eHist"});
83             sys.\hyperlink{classsim_system_a3239a23e35f30e40eeecf8795386c164}{restartPkHistogram}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/pkHist"});
84             sys.\hyperlink{classsim_system_a999556fea891765c5ed4d979706665af}{restartExtMoments}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/extMom"}, ctr);
85         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && !\hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} && !\hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone}) \{ \textcolor{comment}{// In crossover
       stage}
86             \hyperlink{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}{resFromCross} = \textcolor{keyword}{true};
87             sys.\hyperlink{classsim_system_ac689245cd8e9ddfdcd94d3871a5a5d6b}{startTMMC}(sys.\hyperlink{classsim_system_a56e284a361964d0a9ce5c45f41d56ab1}{tmmcSweepSize}, sys.\hyperlink{classsim_system_aa4ad1afff101bb530e1590df05035276}{getTotalM}());
88             \hyperlink{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{wala\_lnF} = doc[\textcolor{stringliteral}{"wala\_lnF"}].GetDouble();
89             sys.\hyperlink{classsim_system_a57af66c88ce4dc1aeb6a1cd3f14ff0bb}{startWALA} (\hyperlink{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{wala\_lnF}, sys.\hyperlink{classsim_system_aa2e866e69ebe5fa0761894212592175a}{wala\_g}, sys.
      \hyperlink{classsim_system_a7cc3431bb59acca9165b044dbd07dcdc}{wala\_s}, sys.\hyperlink{classsim_system_aa4ad1afff101bb530e1590df05035276}{getTotalM}());
90 
91             sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_a7d9ee0505dc801cbff55bc35c3654a61}{readC}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc\_C.dat"});
92             sys.\hyperlink{classsim_system_aa31d40c91cb50f143a9613d362798887}{getTMMCBias}()->\hyperlink{classtmmc_ab51a593d041a65c4ca47e6c4e0c26992}{readHC}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/tmmc\_HC.dat"});
93             sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_ae04916f49c11b0636e813787a3906570}{readlnPI}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala\_lnPI.dat"});
94             sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_a0b8df0fb2b7722fc4a458e527a478b6f}{readH}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala\_H.dat"});
95 
96             \textcolor{comment}{// Energy upper and lower bounds for histogram}
97             \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb}.resize(doc[\textcolor{stringliteral}{"energyHistogramLB"}].Size(), 0);
98             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < doc[\textcolor{stringliteral}{"energyHistogramLB"}].Size(); ++i) \{
99                 \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb}[i] = doc[\textcolor{stringliteral}{"energyHistogramLB"}][i].GetDouble();
100             \}
101             sys.\hyperlink{classsim_system_a284cf6c00f572db12db0cb263974a78a}{setELB}(\hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb});
102 
103             \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.resize(doc[\textcolor{stringliteral}{"energyHistogramUB"}].Size(), 0);
104             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < doc[\textcolor{stringliteral}{"energyHistogramUB"}].Size(); ++i) \{
105                 \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}[i] = doc[\textcolor{stringliteral}{"energyHistogramUB"}][i].GetDouble();
106             \}
107             sys.\hyperlink{classsim_system_ab894de5ccd37efa97ae799f1dc1875a1}{setEUB}(\hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub});
108         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{walaDone} && !\hyperlink{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{crossoverDone} && !\hyperlink{classcheckpoint_acbe0c62aa82735741a9f396827966823}{tmmcDone}) \{ \textcolor{comment}{// In WALA
       stage and printed 1st checkpoint already}
109             \hyperlink{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}{resFromWALA} = \textcolor{keyword}{true};
110             \hyperlink{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{wala\_lnF} = doc[\textcolor{stringliteral}{"wala\_lnF"}].GetDouble();
111             sys.\hyperlink{classsim_system_a57af66c88ce4dc1aeb6a1cd3f14ff0bb}{startWALA} (\hyperlink{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{wala\_lnF}, sys.\hyperlink{classsim_system_aa2e866e69ebe5fa0761894212592175a}{wala\_g}, sys.
      \hyperlink{classsim_system_a7cc3431bb59acca9165b044dbd07dcdc}{wala\_s}, sys.\hyperlink{classsim_system_aa4ad1afff101bb530e1590df05035276}{getTotalM}());
112 
113             sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_ae04916f49c11b0636e813787a3906570}{readlnPI}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala\_lnPI.dat"});
114             sys.\hyperlink{classsim_system_a7cb5049de8b0988349e89e30e4000407}{getWALABias}()->\hyperlink{classwala_a0b8df0fb2b7722fc4a458e527a478b6f}{readH}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/wala\_H.dat"});
115 
116             \textcolor{comment}{// Energy upper and lower bounds for histogram}
117             \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb}.resize(doc[\textcolor{stringliteral}{"energyHistogramLB"}].Size(), 0);
118             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < doc[\textcolor{stringliteral}{"energyHistogramLB"}].Size(); ++i) \{
119                 \hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb}[i] = doc[\textcolor{stringliteral}{"energyHistogramLB"}][i].GetDouble();
120             \}
121             sys.\hyperlink{classsim_system_a284cf6c00f572db12db0cb263974a78a}{setELB}(\hyperlink{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{elb});
122 
123             \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}.resize(doc[\textcolor{stringliteral}{"energyHistogramUB"}].Size(), 0);
124             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < doc[\textcolor{stringliteral}{"energyHistogramUB"}].Size(); ++i) \{
125                 \hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub}[i] = doc[\textcolor{stringliteral}{"energyHistogramUB"}][i].GetDouble();
126             \}
127             sys.\hyperlink{classsim_system_ab894de5ccd37efa97ae799f1dc1875a1}{setEUB}(\hyperlink{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{eub});
128         \} \textcolor{keywordflow}{else} \{
129             \textcolor{keywordflow}{if} (!\textcolor{keyword}{override}) \{
130                 \hyperlink{utilities_8cpp_a6dacf3c3c19aa1e13a4d5a148fe5114e}{sendErr}(\textcolor{stringliteral}{"Uncertain which stage simulation is in, so cannot checkpoint"});
131                 exit(\hyperlink{global_8h_a428dfe1ef0a6ff4b1fdebf275f6aff2e}{SYS\_FAILURE});
132             \}
133         \}
134 
135         sys.\hyperlink{classsim_system_a3161d95bbb800d5d95a732ac5fc32b95}{readConfig}(\hyperlink{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{dir}+\textcolor{stringliteral}{"/snap.xyz"});
136         \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = \textcolor{keyword}{true};
137     \} \textcolor{keywordflow}{catch} (std::exception &ex) \{
138         std::string msg = ex.what();
139         \textcolor{keywordflow}{if} (!\textcolor{keyword}{override}) \{
140             \hyperlink{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{hasCheckpoint} = \textcolor{keyword}{false};
141             \hyperlink{utilities_8cpp_a6dacf3c3c19aa1e13a4d5a148fe5114e}{sendErr}(\textcolor{stringliteral}{"Unable to load checkpoint "}+msg);
142             exit(\hyperlink{global_8h_a428dfe1ef0a6ff4b1fdebf275f6aff2e}{SYS\_FAILURE});
143         \} \textcolor{keywordflow}{else} \{
144             \hyperlink{utilities_8cpp_a6dacf3c3c19aa1e13a4d5a148fe5114e}{sendErr}(\textcolor{stringliteral}{"Overriding the following errors to load checkpoint "}+msg);
145         \}
146     \}
147 
148     \hyperlink{utilities_8cpp_a08974c73a5b36c28b8ad1ef47fca77b0}{sendMsg}(\textcolor{stringliteral}{"Checkpoint loaded from "}+\hyperlink{classcheckpoint_a477eea21621f066889660ed426dc800f}{chkptName});
149 \}
\end{DoxyCode}


\subsection{Field Documentation}
\hypertarget{classcheckpoint_a477eea21621f066889660ed426dc800f}{\index{checkpoint@{checkpoint}!chkpt\-Name@{chkpt\-Name}}
\index{chkpt\-Name@{chkpt\-Name}!checkpoint@{checkpoint}}
\subsubsection[{chkpt\-Name}]{\setlength{\rightskip}{0pt plus 5cm}std\-::string checkpoint\-::chkpt\-Name}}\label{classcheckpoint_a477eea21621f066889660ed426dc800f}


Name of checkpoint file. 



Definition at line 43 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), and load().

\hypertarget{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}{\index{checkpoint@{checkpoint}!crossover\-Done@{crossover\-Done}}
\index{crossover\-Done@{crossover\-Done}!checkpoint@{checkpoint}}
\subsubsection[{crossover\-Done}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::crossover\-Done}}\label{classcheckpoint_a4f13612ea6d376bb327295bfce3a70c5}


Definition at line 34 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), load(), and perform\-Crossover().

\hypertarget{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}{\index{checkpoint@{checkpoint}!dir@{dir}}
\index{dir@{dir}!checkpoint@{checkpoint}}
\subsubsection[{dir}]{\setlength{\rightskip}{0pt plus 5cm}std\-::string checkpoint\-::dir}}\label{classcheckpoint_a0e0f999ee8e0b09541e9131baa8a591d}


Name of the checkpoint directory containing the information to reinitialize the system (json) 



Definition at line 42 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), and load().

\hypertarget{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}{\index{checkpoint@{checkpoint}!elb@{elb}}
\index{elb@{elb}!checkpoint@{checkpoint}}
\subsubsection[{elb}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$ double $>$ checkpoint\-::elb}}\label{classcheckpoint_a2338cb624f19eb6776c10f9bb83b2a5d}


Definition at line 45 of file checkpoint.\-h.



Referenced by dump(), and load().

\hypertarget{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}{\index{checkpoint@{checkpoint}!eub@{eub}}
\index{eub@{eub}!checkpoint@{checkpoint}}
\subsubsection[{eub}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$ double $>$ checkpoint\-::eub}}\label{classcheckpoint_a7071b01d0936873321d0a706e761b6ac}


Upper and lower energy bounds for energy histogram. 



Definition at line 45 of file checkpoint.\-h.



Referenced by dump(), and load().

\hypertarget{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}{\index{checkpoint@{checkpoint}!freq@{freq}}
\index{freq@{freq}!checkpoint@{checkpoint}}
\subsubsection[{freq}]{\setlength{\rightskip}{0pt plus 5cm}long int checkpoint\-::freq}}\label{classcheckpoint_a11a2d78eb0bf6045b659a4d18b53da44}


Frequency (in seconds) that the system should print a new instantaneous snapshot of itself, does not load from checkpoints but is assigned when instantiated (is dumped though) 



Definition at line 37 of file checkpoint.\-h.



Referenced by check(), checkpoint(), and dump().

\hypertarget{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}{\index{checkpoint@{checkpoint}!has\-Checkpoint@{has\-Checkpoint}}
\index{has\-Checkpoint@{has\-Checkpoint}!checkpoint@{checkpoint}}
\subsubsection[{has\-Checkpoint}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::has\-Checkpoint}}\label{classcheckpoint_aa75f306fcb0c2360d948fa3a61adfed5}


At least one checkpoint has been made that the system can restart from. 



Definition at line 32 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), and load().

\hypertarget{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}{\index{checkpoint@{checkpoint}!move\-Counter@{move\-Counter}}
\index{move\-Counter@{move\-Counter}!checkpoint@{checkpoint}}
\subsubsection[{move\-Counter}]{\setlength{\rightskip}{0pt plus 5cm}long long int checkpoint\-::move\-Counter}}\label{classcheckpoint_a5ab49a355714da4874aba00eb03f701d}


Tracks the number of moves in a given sweep that have executed. 



Definition at line 38 of file checkpoint.\-h.



Referenced by checkpoint(), load(), perform\-Crossover(), perform\-T\-M\-M\-C(), and perform\-W\-A\-L\-A().

\hypertarget{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}{\index{checkpoint@{checkpoint}!res\-From\-Cross@{res\-From\-Cross}}
\index{res\-From\-Cross@{res\-From\-Cross}!checkpoint@{checkpoint}}
\subsubsection[{res\-From\-Cross}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::res\-From\-Cross}}\label{classcheckpoint_ac3e65d26f2b8231ae9dd7e29c72ecf3b}


Definition at line 35 of file checkpoint.\-h.



Referenced by checkpoint(), load(), and perform\-Crossover().

\hypertarget{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}{\index{checkpoint@{checkpoint}!res\-From\-T\-M\-M\-C@{res\-From\-T\-M\-M\-C}}
\index{res\-From\-T\-M\-M\-C@{res\-From\-T\-M\-M\-C}!checkpoint@{checkpoint}}
\subsubsection[{res\-From\-T\-M\-M\-C}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::res\-From\-T\-M\-M\-C}}\label{classcheckpoint_ab8f6081561b8c7871eea6743d4988d8a}


Flags corresponding to which stage the checkpoint indicated to restart from. 



Definition at line 35 of file checkpoint.\-h.



Referenced by checkpoint(), load(), and perform\-T\-M\-M\-C().

\hypertarget{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}{\index{checkpoint@{checkpoint}!res\-From\-W\-A\-L\-A@{res\-From\-W\-A\-L\-A}}
\index{res\-From\-W\-A\-L\-A@{res\-From\-W\-A\-L\-A}!checkpoint@{checkpoint}}
\subsubsection[{res\-From\-W\-A\-L\-A}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::res\-From\-W\-A\-L\-A}}\label{classcheckpoint_a46f1c17d03901292f642ccad0a325d9e}


Definition at line 35 of file checkpoint.\-h.



Referenced by checkpoint(), load(), and perform\-W\-A\-L\-A().

\hypertarget{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}{\index{checkpoint@{checkpoint}!sweep\-Counter@{sweep\-Counter}}
\index{sweep\-Counter@{sweep\-Counter}!checkpoint@{checkpoint}}
\subsubsection[{sweep\-Counter}]{\setlength{\rightskip}{0pt plus 5cm}long long int checkpoint\-::sweep\-Counter}}\label{classcheckpoint_ad011ddbca1ea708321335b1b3ac67e07}


Tracks the number of sweeps that have executed. 



Definition at line 39 of file checkpoint.\-h.



Referenced by checkpoint(), load(), perform\-Crossover(), and perform\-T\-M\-M\-C().

\hypertarget{classcheckpoint_a685226e8bae8084937f73f65c326c362}{\index{checkpoint@{checkpoint}!take\-Snaps@{take\-Snaps}}
\index{take\-Snaps@{take\-Snaps}!checkpoint@{checkpoint}}
\subsubsection[{take\-Snaps}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::take\-Snaps}}\label{classcheckpoint_a685226e8bae8084937f73f65c326c362}


Save snapshot of the system each time a record is made. 



Definition at line 33 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), and load().

\hypertarget{classcheckpoint_acbe0c62aa82735741a9f396827966823}{\index{checkpoint@{checkpoint}!tmmc\-Done@{tmmc\-Done}}
\index{tmmc\-Done@{tmmc\-Done}!checkpoint@{checkpoint}}
\subsubsection[{tmmc\-Done}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::tmmc\-Done}}\label{classcheckpoint_acbe0c62aa82735741a9f396827966823}


Definition at line 34 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), load(), and perform\-T\-M\-M\-C().

\hypertarget{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}{\index{checkpoint@{checkpoint}!wala\-\_\-ln\-F@{wala\-\_\-ln\-F}}
\index{wala\-\_\-ln\-F@{wala\-\_\-ln\-F}!checkpoint@{checkpoint}}
\subsubsection[{wala\-\_\-ln\-F}]{\setlength{\rightskip}{0pt plus 5cm}double checkpoint\-::wala\-\_\-ln\-F}}\label{classcheckpoint_a34dc9c1711a8b4f9986a7a2c41b9dcd1}


Current value of ln\-F from W\-A\-L\-A. 



Definition at line 40 of file checkpoint.\-h.



Referenced by load().

\hypertarget{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}{\index{checkpoint@{checkpoint}!wala\-Done@{wala\-Done}}
\index{wala\-Done@{wala\-Done}!checkpoint@{checkpoint}}
\subsubsection[{wala\-Done}]{\setlength{\rightskip}{0pt plus 5cm}bool checkpoint\-::wala\-Done}}\label{classcheckpoint_aab066479e2ca6656d0031dd46a2fc1a5}


Progress of each stage, regardless of where the checkpoint indicated to start from. 



Definition at line 34 of file checkpoint.\-h.



Referenced by checkpoint(), dump(), load(), and perform\-W\-A\-L\-A().



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/nam4/\-Desktop/sandbox/\-F\-H\-M\-C\-Simulation/src/\hyperlink{checkpoint_8h}{checkpoint.\-h}\item 
/home/nam4/\-Desktop/sandbox/\-F\-H\-M\-C\-Simulation/src/\hyperlink{checkpoint_8cpp}{checkpoint.\-cpp}\end{DoxyCompactItemize}
